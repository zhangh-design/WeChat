## 移动设备的分辨率与rpx

> 前言：好各位同学在正式开始编写我们第一个小程序页面之前呢，我想还是要和大家聊一下这个移动设备的分辨率以及小程序它的一个`rpx`这样的一个概念。

我希望大家能够摆脱传统的一个网页端的这样一个思维方式，因为我相信呢绝大多数同学呢应该都是从事我们`Web`前端开发的，那么大家来学习小程序开发呢就一定要先摆脱这样的一个思维啊就是你用传统的网页端的思维方式，因为小程序呢它虽然是用这个`Web`技术开发`JavaScript`与`Css`，但是呢它的的确确是一个移动端的一个应用开发，所以说大家一定要用移动端的这样一个思维方式来考虑问题。

同时呢你们也要去了解一下移动端的一些独有的这样的一些概念和它的一个特征，这是第一点原因。

那么第二个原因呢还是想给大家一个建议，就是学习呢一定要去掌握它的一些基础原理性的东西，而不是仅仅的去记一个结论，因为如果你只是记一个结论呢以后面对同样的一个问题可能它换了一种形式，你就不知道怎么做了，但是实际上来讲的话呢这些知识你都应该是学到过的，只有你了解了它的一些基础原理你才能应对后面一些千变万化的这样的一些问题。

你比如说啊：在移动端开发里面经常会这个设计师会给这个图片，她会给两到三个尺寸的比如说是：原始尺寸、扩大两倍的尺寸、扩大三倍的尺寸，那我们很多同学开发的时候呢都会这么用，但是为什么呢很多人就不知道了，在比如说：为什么`iphone4`和`4s`要比`iphone3`和`3gs`它的清晰度就是说你看起来要更加清楚一些，而像这个`iphon6Plus`它的分辨率提升了，但是为什么呢它却没有明显的比这个`iphone6`的要更加清晰一些呢，像这样的一些问题呢，我觉得大家都有必要去了解一下。

好，那么我们看一下啊，首先呢我们会从这样的一个设计图的实现说起，因为我们说过我们都是从这个实际的案例里面来引出我们的一些问题啊，然后我们会看一下啊会解释一下为什么模拟器下面的`iphone6`的分辨率啊是就是你在屏幕上看到的这个分辨率是375而这个一般你们的设计师啊移动端的设计师一般都会倾向于去做这个750像素的这个分辨率的图，然后呢我们的重点就是去了解一下怎么样在这个小程序上面让小程序啊去适配不同的机型啊，我们知道机型是很多的对不对从`iphone5`开始到`iphone7`对不对很多不同的机型怎么样去适配它，这个是非常重要的而如果你不太了解这个东西的话那移动端这个你是没法去开发的。

- 从一张设计图的实现说起
- 为什么模拟器下 iphone6 的分辨率是375，而设计图一般给750呢？
- 如何适配不同的机型？


那么我们呢首先来看一张设计图（宽度是750像素，高度我们无所谓多高都可以）：

![image](http://m.qpic.cn/psc?/V12UXEll2JjLTU/S1G4*2hi*D5aPIJug2nMa*VFpwWqwFuAXfZlstGK.6eBqgFUm3G15G6OoVDeuF7DT5SQQQUdCV4LqAFTMaQIELxDLWDlK3vRC9ty6bJu4Dk!/b&bo=NgM9AgAAAAARBzo!&rf=viewer_4&t=5)

这是我们团队设计师设计的一个小程序的一个效果图啊，我们主要来看一下它的尺寸，我们关注一下它的宽度啊宽度是0到750像素，高的话呢这个不用管啊多高都可以，我相信呢绝大多数的这个团队的主流的这样一个效果图都是750像素的。

那么为什么要一般都设计这个750像素呢，这个我们后面会讲到，那么我们这些细节啊这些细节我们先不看，我们现在主要第一个目标啊，是把这个图片啊放上去，我们要能够完整的把一张图片按照它的比例（就是比例不失帧）的情况下把它能够显示在小程序里，这就是我们要完成的第一个目标啊，然后我们大家一起来看一下。


好，这里我们来一起啊新建一个微信小程序的项目（可以直接使用测试AppId）。

项目目录：


```
we-chat
 images
    |-crab.jpg （宽度750的一张图）
 pages
    |-index
      |-index.js
      |-index.json
      |-index.wxml
      |-index.wxss
    |-logs
      |-logs.js
      |-logs.json
      |-logs.wxml
      |-logs.wxss
 utils
    |-util.js
 app.js
 app.json
 app.wxss
 project.config.json
 sitemap.json
```


那我们现在要在新建的小程序项目内引入一张图片，来演示这节课的内容。

index.wxml

```
<!--index.wxml-->
<image src="/images/crab.jpg" style="width:750px;height:500px"></image>

```

图片的宽度是效果图的`750px`，高度是`500px`，注意：这里的单位是`px`像素。

好按道理来讲应该是这样的，然后我们看一下对不对啊：

![image](http://m.qpic.cn/psc?/V12UXEll2JjLTU/S1G4*2hi*D5aPIJug2nMay*y27CPk3y5XXbsH0Eam1IKqfy.PeGkP11xpoFMPTOFrdP7V6H4Bus8i87O3gLaWAA8WIB6zdDyjW0xVV.enfY!/b&bo=9wG3AgAAAAARB3M!&rf=viewer_4&t=5)

好像不太对是不是，这个图片只显示了一半对不对，它不是被压缩了啊很明显的是被截断了，然后高度是对的我们刚才说了高度不影响多高都可以它可以撑开，那这个问题是什么呢，我们看下`iphone6`这个模拟器上面宽度只有`375`（其实这里的375就是代表的逻辑分辨率pt，但是我们在网页上只能设置px，所以要把crab.jpg整张图显示出来就要设成width:375px，那如果设置为width:750px的话就刚好扩大了一倍），它只有`375`（这里要注意单位是pt）那怎么去显示`750px`呢，这个原因是什么呢？

![image](http://m.qpic.cn/psc?/V12UXEll2JjLTU/S1G4*2hi*D5aPIJug2nMaz.wC4Gn*HlxW8jO.IcQvuVVVJMpMnuFrvfHgw4r7cH0*rO8yID2mTRceQLdK6cFmGdMY0YzOtL70M.J7y79m7M!/b&bo=EQFTAQAAAAARB3I!&rf=viewer_4&t=5)

那你现在是不是要跑去找你们的设计师啊，跟他说我们这个小程序啊只能显示`375px`的图片所以说你这个设计图不能用啊，那你这个设计师啊把这个设计图啊给修改成宽度是`375px`的效果：

![image](http://m.qpic.cn/psc?/V12UXEll2JjLTU/S1G4*2hi*D5aPIJug2nMa6iJMYBQ*MG43rjRiyCSHfADxbwJavnMcaRxOXEh7FMt7N.TS8*oDioehcnkRGdmJghnyrQGkX4nTgktrS2IKa8!/b&bo=bgLOAQAAAAARB5M!&rf=viewer_4&t=5)

那我们看下这个`375px`宽的效果图啊，如果你这个`375px`你这个连字都看不清楚这个还能叫做一个效果图吗，好像是不可以的啊。

那这里我们就要讲到为什么小程序这里只有`375`（这里要注意单位，我这里先不写下面会讲解）而设计图一般呢它都会给这个`750px`的这样一个设计图。

好，还是我们刚刚这个问题啊：

- 为什么模拟器下 iphone6 的分辨率是375，而设计图一般给750呢？

好我们呢就要来给大家去解答这样的一个疑问，要解答这个疑问呢，我们就还是要回到这个移动端的本质上面来，所以说这也是我们刚刚提到的`Web`端和移动端的其中一个不一样的点啊。

要开发这个移动应用，我们就必须要了解这样的一个分辨率的一些概念：

我们来看一下啊，看一下下面这个列表:

设备 | 屏幕尺寸 | 分辨率(pt) | Reader | 分辨率(px) | 渲染后 | PPI(DPI)
---|---|---|---|---|---|---
Iphone 3GS | 3.5寸 | 320*480 | @1x | 320*480 | 空 | 163 
Iphone 4/4S | 3.5寸 | 320*480 | @2x | 640*960 | 空 | 326 
Iphone 5/5S/5C | 4.0寸 | 320*568 | @2x | 640*1136 | 空 | 326 
Iphone 6/6S | 4.7寸 | 375*667 | @2x | 750*1334 | 空 | 326 
Iphone 6/6SPlus | 5.5寸 | 414*736 | @3x | 1242*2208 | 1080*1920 | 401 


这个列表上的一些数据，首先这个`屏幕尺寸`这一行应该没有什么疑问吧，这个就是它实际的物理的一个尺寸，比如说：像3GS上面它是3.5寸的，然后我们常用的这个iphone6啊是4.7寸的，更大一点的PLUS是5.5寸的，就是你的物理设备的实际的尺寸。

那么重点是两个，这有两个分辨率一个是`pt`一个是`px`。

要回答我们刚刚的这个问题就要理解`pt`和`px`。

##### 那么什么是`pt`呢？

这种分辨率呢也叫做`逻辑分辨率`，我们简单点理解可以把它理解为是一个长度单位就是我们的一个视觉单位实际上看到的，它和什么有关系啊它只和这个屏幕尺寸有关系，我们举个例子来讲：

你比如说像`3GS`和`4/4S`同样都是`3.5寸`的设备，所以说它们这个分辨率(pt)啊都是`320`，你看啊`3GS`是`3.5寸`然后`4/4S`也是`3.5寸`所以它们的宽度上的逻辑分辨率都是`320`。

那至于说`5`和`5S`啊它的逻辑分辨率也是`320`为什么呢？那是因为它的高度变了，所以说它的尺寸就更大一点了`4.0寸`，但是它的宽度呢都是`320`这样的一个逻辑分辨率，所以说呢我们可以简单的理解这个逻辑分辨率呢就是和这个屏幕的物理尺寸有关系，它是一个长度的单位，这个只是简单的理解但是实际上不能这么理解的因为它和移动设备的栅格渲染有关系啊，这个就会讲的比较深了我们这里就不再继续深入这个了，大家现在只要知道把它理解为就是一个长度单位就可以了。

##### 那我们在看这个`分辨率（px）`，px它又是一个什么样的概念呢？

这个px呢在移动端设备里面我们说它是一个叫做`物理分辨率`，它和这个屏幕的尺寸没有任何的关系，它也不是一个视觉单位，我们简单一点把它理解为一个像素点，我们看到的每一个图片呢都是由很多很多的这样的物理像素点所构成的。

为什么说它不是一个这样的一个长度相关的单位呢，你说在现实世界里面你能说一个点由多大吗，点能够描述它的大小吗，不可以对不对，那我们可以描述点的一个什么呢？我们只能描述点的一个个数对吧有多少个点但不能说有多大的点，所以说呢这里能够得到一个`pt`与`px`之间的一个关系啊。

这个关系是什么呢，就是一个`pt`对应几个`px`，每一个单位的长度里面能够包含几个`px`。

那我们这里就要提出一个问题啊，为什么`iphone4`和`4S`要比这个`3GS`在屏幕显示效果上面要更好一些呢，这个原因啊还是在于我们刚刚提到的跟它的每一个逻辑分辨率（pt）下面包含的物理像素点（px）个数有关系，我们具体可以看一下啊：

比如说在`iphone4`和`4S`下面同样的它和`3GS`相比它的逻辑分辨率（pt）都是`320*480`，但是呢关键在于它们对应的这个物理分辨率（px）不一样，`iphone4`和`4S`下面对应的这个`640*960`，但是在`3GS`下面的物理分辨率是`320*480`，同样的一个pt单位下面`3GS`要少一半，所以说这就是这个`Render`这里1倍（@1x）和2倍（@2x）关系，这个表示什么呢？表示同一个pt下面包含了有多少个px，我们都知道就是说你同一个单位下面呢你的物理点越多图像的显示自然就越细腻啊，这就是它的这个显示要更加清晰。

然后呢我们在来看这个`PLUS`版本的这样的一个iphone手机，那么我们提出这样一个问题：

`PLUS`版本的手机会比这个`iphone6/6S`要更清楚一些吗？

这个问题理论上来讲，看到这个地方`Render`它是一个3倍（@3x）的关系，`6/6S`是2倍（@2x）的关系，也就是说每单位pt下面啊`PLUS`比`6/6S`要多出一倍的，那实际上来说呢并不会更加清晰啊，这个原因是为什么呢？大家知道啊这个`Render`屏幕（也就是视网膜屏幕）也就是说在这个单位的像素密度下面呢视网膜屏呢它所承担的这个像素的个数呢已经达到了我们人类的眼睛所能分辨出的这样的一个极限，然后如果你在增加这个物理像素点的话呢比如说：你像`PLUS`是`@3x`，`iphone7/8/9/10`以后增加到`@6x`6倍，7倍，8倍这样，它并不会更加的清晰啊因为`@2x`2倍已经达到我们人类眼睛能够分辨出来的极限，你在去增加的话呢这个其实就是没有意义的了，这也是为什么啊`PLUS`版本呢并不会比这个`6/6S`的要更加的清楚的原因，这个是大家要注意的一个地方。

#### PPT（DPI）

那最后呢我们在随便来聊一下这个`PPT（DPI）`，那这个`PPI`是个什么概念呢。


其实它和这个`Render`这里的这个概念是一样的，`Render`求的是每一个`pt`下面包含
多少个`px`。

这个`PPI`这里呢指的是每一寸包含了多少个物理像素点，那`3GS`这里的这个`PPI`的163是怎么求出来的呢？

我们都知道这个屏幕尺寸这个`3.5寸`它不是指的手机的宽也不是指的手机的高啊，它指的是这个对角线的这个距离啊，所以说呢想到对角线呢那怎么求这个`163`呢得到这个`PPI`，其实就是用勾股定理啊，用这个分辨率（px）的320*480的平方开根号然后再除以3.5寸看一下得到的是不是163，这个大家可以去验证一下啊每一个型号下面的`PPI`是不是都是这样给出的这样一个数据值。

这个`DPI`的概念和`PPI`的概念是一样的啊，它之所以这里有个`PPI`和`DPI`的概念啊这个跟大家随便聊下，就像这个`DPI`它是指传统上面那种打印场景下它指的是每一个单位长度下面它所能打印机所能喷墨的点数啊，然后我们借鉴这个`DPI`的这个概念然后到这种计算机的显示屏幕上来呢，把这个概念换了一下啊就换成了`PPI`啊。

#### 结论

好那现在我们就可以回答刚刚的那个问题：小程序的那个地方为什么是模拟器上分辨率为什么是`375`啊，原因就在于微信小程序的那种模拟器它给出来的是这样的一个逻辑像素（pt）它的那个375指的是逻辑分辨率而不是给的是一个物理分辨率（px），然而设计师通常给你的图呢它通常是根据它的物理分辨率（px）来给你的，所以说呢它给你的是`750`这个px啊，但是小程序呢由于它显示的是`pt`逻辑分辨率而`Render`这个地方是一个2倍（@2x）的关系（在`iphone6/6S`）看到没有`750*1334`和`375*667`一个2倍的关系，所以说它这个地方的模拟器里面给出了这样的一个`375`这样的一个逻辑分辨率（pt）。

这就是为什么在`iphone6/6S`下面物理分辨率（px）和这个逻辑分辨率（pt）之间是2倍的关系，所以说啊我们等会在修改我们小程序的时候就要记住啊这个`750`啊由于是2倍关系所以你要折算成375啊。

index.wxml

```
<!--index.wxml-->
<image src="/images/crab.jpg" style="width:375px;height:500px"></image>

```

这样整张图就能显示出来了（注意这里的单位仍然是px，模拟器是在iphone6/6s中）。

这里注意下：

- iPhone6/6S下 2 个px才构成一个 pt。

